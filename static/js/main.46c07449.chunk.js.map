{"version":3,"sources":["utils.js","data/targets.js","components/game_info.js","components/game.js","data/constants.js","components/shared/modal.js","components/shared/button.js","components/shared/util.js","components/shared/card.js","components/shop.js","utils/localStorage.js","components/settings.js","hooks/game.js","components/app.js","reportWebVitals.js","index.js"],"names":["random","min","max","Math","ceil","floor","degToRad","degrees","PI","useStableCB","callback","values","self","useRef","handler","_len","arguments","length","args","Array","_key","current","TIERS","generateTarget","tier","effects","generateRandomTarget","level","probs","base","l","startingIdx","total","t","rest","generateProbs","rng","bound","chosenTier","UPGRADES","UPGRADE_INFO","baseTargets","descriptions","extraSpawnOnHit","multiOnHit","multiOnConsecutiveHit","INITIAL_UPGRADES","reduce","acc","value","getUpgradeDescription","_ref2","name","STARTING_DECK","Container","styled","div","Left","Right","Center","GameInfo","_ref","timeRemaining","state","useContext","GameContext","upgradeDescriptions","Object","entries","upgrades","filter","_","map","_ref3","join","_jsxs","children","currentScore","goalScore","_jsx","Game","dispatch","canvasRef","canvas","setCanvas","useState","ctx","setCtx","setTimeRemaining","cursorRef","x","y","targetsRef","stateRef","useEffect","getContext","width","window","innerWidth","height","innerHeight","requestPointerLock","unadjustedMovement","pointerLockChange","lockChangeAlert","onClick","handleClick","document","addEventListener","removeEventListener","exitPointerLock","d3","tickAnimation","stop","pointerLockElement","screenX","screenY","hitTarget","newTargets","radius","target","targetMissed","sqrt","pow","percent","push","createNewTarget","type","payload","inc","setTimeout","targetSize","drawCanvas","fillStyle","fillRect","forEach","beginPath","arc","fill","closePath","drawTargets","timeElapsed","numTargets","i","spawnTarget","timerSec","timer","toFixed","mozPointerLockElement","mouseMoveMemo","e","_ref4","dx","movementX","sensitivity","dy","movementY","ref","Background","Modal","close","_Fragment","createPortal","body","colorMap","red","green","pink","DEFAULT_COLOR","button","btnColor","background","Button","props","class","Centered","OptionContainer","CardOption","title","description","selected","style","borderColor","borderWidth","fontWeight","Shop","purchaseCardModal","setPurchaseCardModal","money","display","JSON","stringify","purchaseCard","count","choice","includes","generateRandomUpgrades","disabled","PurchaseCardModal","options","setSelected","collect","initialState","save","key","localStorage","setItem","SettingsModal","isOpen","step","onChange","event","status","getItem","parseInt","fetchInt","INITIAL_GAME_STATE","targets","bumpLevel","reducer","action","newScore","Error","assign","upgrade","StartScreen","React","createContext","App","useReducer","settings","setSettings","startGame","Provider","returnHome","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.46c07449.chunk.js","sourcesContent":["import { useRef } from 'react';\n\nexport const random = (min, max) => {\n  min = Math.ceil(min);\n  max = Math.floor(max);\n  return Math.floor(Math.random() * (max - min) + min); // The maximum is exclusive and the minimum is inclusive\n}\n\n// Takes in percent chance as a decimal, rolls that percent chance\nexport const rollProbability = (percent) => {\n  return Math.random() < percent; // The maximum is exclusive and the minimum is inclusive\n}\n\nexport const degToRad = (degrees) => Math.PI / 180 * degrees;\n\nexport const useStableCB = (callback, values) => {\n  const self = useRef({\n    values: values,\n    handler: (...args) => {\n      return callback(...args, self.current.values)\n    }\n  });\n  self.current.values = values\n  return self.current.handler\n}","import { random } from \"../utils\"\n\nexport const TIERS = ['gray', 'green', 'blue', 'purple', 'gold']\n\nexport const generateTarget = (tier) => {\n  return {\n    tier,\n    effects: [],\n  }\n}\n\nconst generateProbs = (level) => {\n  const base = [90, 9, 1, 0, 0];\n\n  for (let l = 1; l <= level; l++) {\n    let startingIdx = 2;\n    if (l > 9) {\n      startingIdx = 4\n    } else if (l > 4) {\n      startingIdx = 3\n    }\n    let total = 0;\n    for (let t = startingIdx; t > 0; t--) {\n      base[t] += 1;\n      total += base[t];\n    }\n    const rest = 100 - total;\n    base[0] = rest;\n  }\n  return base;\n}\n\nexport const generateRandomTarget = (level) => {\n  const probs = generateProbs(level);\n\n  const rng = random(0, 101);\n\n  let bound = 0;\n  let chosenTier = 0;\n  for (let tier = 0; tier < probs.length; tier++) {\n    bound += probs[tier];\n    if (rng < bound) {\n      chosenTier = tier;\n      break;\n    }\n  }\n\n  return {\n    tier: chosenTier,\n    effects: [],\n  }\n}\n\nexport const UPGRADES = ['baseTargets', 'extraSpawnOnHit', 'multiOnHit', 'multiOnConsecutiveHit']\nexport const UPGRADE_INFO = {\n  baseTargets: {\n    descriptions: [\n      'Increases base number of targets by 1',\n      'Increases base number of targets by 2',\n      'Increases base number of targets by 3',\n      'Increases base number of targets by 4',\n    ],\n  },\n  extraSpawnOnHit: {\n    descriptions: [\n      '5% chance of extra target spawning on hit',\n      '10% chance of extra target spawning on hit',\n      '15% chance of extra target spawning on hit',\n      '20% chance of extra target spawning on hit',\n    ],\n  },\n  multiOnHit: {\n    descriptions: [\n      'Not implemented yet. Do not choose'\n    ],\n  },\n  multiOnConsecutiveHit: {\n    descriptions: [\n      'Not implemented yet. Do not choose'\n    ],\n  },\n}\nexport const INITIAL_UPGRADES = UPGRADES.reduce((acc, value) => {\n  acc[value] = 0;\n  return acc;\n}, {})\n\nexport const generateRandomUpgrade = () => {\n  return UPGRADES[random(0, UPGRADES.length)];\n}\n\nexport const generateRandomUpgrades = ({ count }) => {\n  const upgrades = [];\n  while (upgrades.length < count) {\n    const choice = generateRandomUpgrade();\n    if (!upgrades.includes(choice)) {\n      upgrades.push(choice);\n    }\n  }\n  return upgrades;\n}\n\nexport const getUpgradeDescription = ({ level, name }) => UPGRADE_INFO[name]['descriptions'][level];\n\nexport const STARTING_DECK = [\n  generateTarget(0),\n  generateTarget(0),\n  generateTarget(0),\n]","import React, { useContext } from 'react';\nimport styled from '@emotion/styled';\n\nimport { GameContext } from './app';\nimport { getUpgradeDescription } from '../data/targets';\n\nconst Container = styled.div`\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 80px;\n  color: white;\n`;\n\nconst Left = styled.div`\n  float: left;\n`\n\nconst Right = styled.div`\n  float: right;\n`\n\nconst Center = styled.div`\n  margin: 0 auto;\n  width: 100px;\n`\n\nconst GameInfo = ({ timeRemaining }) => {\n  const { state } = useContext(GameContext);\n\n  const upgradeDescriptions = Object.entries(state.upgrades)\n    .filter(([_, level]) => level > 0)\n    .map(([name, level]) => getUpgradeDescription({ name, level }))\n    .join(', ');\n\n  return (\n    <Container>\n      <Left>\n        <h1>Level {state.level}</h1>\n        <h1>Score: {state.currentScore} / {state.goalScore}</h1>\n      </Left>\n      <Right>\n        <p>Upgrades</p>\n        <p>{upgradeDescriptions}</p>\n      </Right>\n      <Center>\n        <h1>{timeRemaining}</h1>\n      </Center>\n    </Container>\n  );\n};\n\nexport default GameInfo;","import React, { useEffect, useContext, useState, useRef } from 'react';\nimport styled from '@emotion/styled';\nimport * as d3 from 'd3-timer';\n\nimport { GameContext } from './app';\nimport GameInfo from './game_info';\nimport { degToRad, random, useStableCB, rollProbability } from '../utils';\nimport { TIERS, generateRandomTarget } from '../data/targets';\n\nconst RADIUS = 5;\n\nconst Container = styled.div`\n  height: 100%;\n  width: 100%;\n`;\n\nconst Game = () => {\n  const { state, dispatch } = useContext(GameContext);\n  const canvasRef = useRef(null);\n  const [canvas, setCanvas] = useState();\n  const [ctx, setCtx] = useState();\n  const [timeRemaining, setTimeRemaining] = useState();\n  const cursorRef = useRef({ x: 500, y: 500 });\n  const targetsRef = useRef([]);\n  const stateRef = useRef(state);\n\n  useEffect(() => {\n    stateRef.current = state; \n  }, [state])\n\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    setCanvas(canvas);\n    const ctx = canvasRef.current.getContext('2d');\n    setCtx(ctx);\n    canvasRef.current.width = window.innerWidth;\n    canvasRef.current.height = window.innerHeight;\n    canvas.requestPointerLock({\n      unadjustedMovement: true,\n    });\n    const pointerLockChange = () => lockChangeAlert(canvas)\n    const onClick = () => handleClick(canvas)\n    document.addEventListener('pointerlockchange', pointerLockChange, false);\n    document.addEventListener('click', onClick);\n\n    return () => {\n      document.removeEventListener('pointerlockchange', pointerLockChange);\n      document.removeEventListener('click', onClick);\n      document.exitPointerLock();\n    };\n  }, [])\n\n  useEffect(() => {\n    let t;\n    if (canvas && ctx) {\n      t = d3.timer(tickAnimation)\n    }\n    return () => t && t.stop()\n  }, [canvas, ctx]);\n\n  const handleClick = (canvas) => {\n    if (!document.pointerLockElement) {\n      // Handle 100ms required delay to relock pointer\n      setTimeout(() => {\n        canvasRef.current.requestPointerLock({\n          unadjustedMovement: true,\n        });\n      }, 100);\n    } else {\n      const screenX = cursorRef.current.x;\n      const screenY = cursorRef.current.y;\n      const targets = targetsRef.current;\n      let hitTarget;\n      const newTargets = targets.filter(({ x, y, radius, target }) => {\n        // Filter out if target clicked inside\n        const targetMissed = Math.sqrt(Math.pow(x - screenX, 2) + Math.pow(y - screenY, 2)) >= (radius + RADIUS);\n        if (!targetMissed) {\n          hitTarget = target;\n        }\n        return targetMissed;\n      });\n\n      if (!hitTarget) {\n        // Player loses points on missing target\n        dispatch({ type: 'hitTarget', payload: { inc: -1 }})\n      } else {\n        const { extraSpawnOnHit } = state.upgrades;\n        if (extraSpawnOnHit > 0 && rollProbability(extraSpawnOnHit * 0.05)) {\n          newTargets.push(createNewTarget());\n          newTargets.push(createNewTarget());\n        }\n        dispatch({ type: 'hitTarget', payload: { inc: hitTarget.tier + 1 }})\n        targetsRef.current = newTargets;\n      }\n    }\n  }\n\n  const createNewTarget = () => {\n    if (!canvasRef.current) {\n      // Return dummy target if target created while canvas does not exist (happens during race condition)\n      return { x: 0, y: 0, radius: 0, target: generateRandomTarget(0) };\n    }\n    const { targetSize, level } = state;\n    const { width, height } = canvasRef.current;\n    const x = random(width / 2 - width / 4, width - targetSize - width / 2);\n    const y = random(height / 2 - height / 4, height - targetSize - height / 2);\n    return { x, y, radius: targetSize, target: generateRandomTarget(level) };\n  }\n\n  const spawnTarget = (canvas) => {\n    const { baseTargets } = state.upgrades;\n    const numTargets = targetsRef.current.length;\n    if (numTargets <= baseTargets && canvas) {\n      for (let i = numTargets; i < baseTargets; i++) {\n        targetsRef.current.push(createNewTarget());\n      }\n      targetsRef.current.push(createNewTarget());\n    }\n  }\n\n  const drawTargets = (ctx) => {\n    targetsRef.current.forEach(({ x, y, radius, target }) => {\n      ctx.fillStyle = TIERS[target.tier];\n      ctx.beginPath();\n      ctx.arc(x, y, radius, 0, degToRad(360), true);\n      ctx.fill();\n      ctx.closePath();\n    });\n  };\n\n  const drawCanvas = (canvas, ctx) => {\n    const { width, height } = canvas;\n    ctx.fillStyle = 'black';\n    ctx.fillRect(0, 0, width, height);\n\n    drawTargets(ctx);\n\n    // Cursor\n    ctx.fillStyle = \"#f00\";\n    ctx.beginPath();\n    ctx.arc(cursorRef.current.x, cursorRef.current.y, RADIUS, 0, degToRad(360), true);\n    ctx.fill();\n    ctx.closePath();\n  }\n\n  const tickAnimation = useStableCB((timeElapsed, [canvas, ctx]) => {\n    if (!canvas || !ctx) return;\n\n    spawnTarget(canvas);\n    drawCanvas(canvas, ctx);\n\n    // Handle timer state in game loop\n    const timerSec = (state.timer - timeElapsed / 1000).toFixed(2);\n    if (timerSec <= 0) {\n      return dispatch({ type: 'endRound' });\n    }\n    setTimeRemaining(timerSec);\n\n  }, [canvas, ctx]);\n\n  const lockChangeAlert = (canvas) => {\n    if (document.pointerLockElement === canvas ||\n        document.mozPointerLockElement === canvas) {\n      canvas.addEventListener(\"mousemove\", mouseMoveMemo, false);\n    } else {\n      canvas.removeEventListener(\"mousemove\", mouseMoveMemo, false);\n    }\n  }\n\n  const mouseMoveMemo = useStableCB((e, [cursorRef, canvas]) => {\n    if (!canvas) return;\n    // Edge detection\n    const { x, y } = cursorRef.current;\n    if (x > canvas.width) {\n      cursorRef.current = { x: canvas.width - 1, y }\n      return\n    }\n    if (y > canvas.height) {\n      cursorRef.current = { x, y: canvas.height - 1 }\n      return\n    }  \n    if (x < 0) {\n      cursorRef.current = { x: 1, y }\n      return\n    }\n    if (y < 0) {\n      cursorRef.current = { x, y: 1 }\n      return\n    }\n    const dx = e.movementX * (state.sensitivity || 1);\n    const dy = e.movementY * (state.sensitivity || 1);\n    cursorRef.current = { x: x + dx, y: y + dy }\n  }, [cursorRef, canvas]);\n\n  return (\n    <Container>\n      <GameInfo timeRemaining={timeRemaining} />\n      <canvas ref={canvasRef}>\n      </canvas>\n    </Container>\n  );\n}\n\nexport default Game;\n","export const COLORS = {\n  darkYellow: '#F6BE00',\n  darkRed: '#8b0000',\n  metallicGray: '#A8A9AD',\n  omYellow: '#FACE26',\n  omOrange: '#FD871A',\n  omSand: '#F0E0BE',\n  // TODO: find better colors for HTML defaults\n  common: 'gray',\n  uncommon: 'green',\n  rare: 'blue',\n  epic: 'purple',\n  legendary: 'yellow',\n};\n\n// Real values\nexport const PURCHASE_CARD_PRICE = 30;\nexport const ROUND_TIME = 20;\nexport const INITIAL_GOAL_SCORE = 10;\nexport const COMPLETE_ROUND_ON_SCORE_HIT = false;","import { createPortal } from \"react-dom\";\nimport styled from '@emotion/styled';\n\nconst Background = styled.div`\n  background-color: black;\n  opacity: .4;\n  height: 100vh;\n  width: 100vw;\n  z-index: 1;\n  position: fixed;\n  top: 0;\n  left: 0;\n`;\n\nconst Container = styled.div`\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  z-index: 2;\n  background-color: white;\n  padding: 24px;\n  border-radius: 16px;\n  opacity: 1;\n`;\n\nexport const Modal = ({ children, close }) => {\n  return (\n    <>\n      {createPortal(\n        <>\n        <Container>\n          {children}\n        </Container>\n        <Background onClick={close}></Background>\n        </>, document.body)}\n    </>\n  )\n}","import React from 'react';\nimport styled from '@emotion/styled';\n\nconst colorMap = {\n  red: ['hsl(340deg 100% 32%)', 'hsl(345deg 100% 47%)'],\n  green: ['hsl(107deg 100% 25%)', 'hsl(107deg 100% 35%)'],\n  pink: ['hsl(333deg 100% 70%)', 'hsl(333deg 100% 78%)'],\n};\nconst DEFAULT_COLOR = 'pink';\n\nconst Container = styled.button`\n  background: hsl(340deg 100% 32%);\n  ${({ btnColor }) => ({ background: colorMap[btnColor ?? DEFAULT_COLOR][0] })}\n  border-radius: 12px;\n  border: none;\n  padding: 0;\n  cursor: pointer;\n  outline-offset: 4px;\n\n  .front {\n    display: block;\n    padding: 12px 42px;\n    border-radius: 12px;\n    font-size: 1.25rem;\n    ${({ btnColor }) => ({ background: colorMap[btnColor ?? DEFAULT_COLOR][1] })}\n    color: white;\n    transform: translateY(-6px);\n  }\n\n  &:disabled {\n    opacity: .4;\n    cursor: default;\n  }\n\n  &:hover {\n  &:hover:not(:disabled) {\n    filter: brightness(110%);\n  }\n  &:hover:not(:disabled) .front {\n    transform: translateY(-6px);\n    transition:\n      transform\n      250ms\n      cubic-bezier(.3, .7, .4, 1.5);\n  }\n  &:active:not(:disabled) .front {\n    transform: translateY(-2px);\n    transition: transform 34ms;\n  }\n  &:focus:not(:focus-visible) {\n    outline: none;\n  }\n`;\n\nexport const Button = ({ children, ...props }) => (\n  <Container {...props}>\n    <span class=\"front\">\n      {children}\n    </span>\n  </Container>\n);\n","import styled from '@emotion/styled';\n\nexport const Centered = styled.div`\n  font-weight: 600;\n  text-transform: uppercase;\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  margin-right: -50%;\n  transform: translate(-50%, -50%);\n`;","import styled from '@emotion/styled';\n\nimport { TIERS } from \"../../data/targets\";\n\nconst Container = styled.div`\n  padding: 4px;\n  border: 3px solid #eee;\n  border-radius: 4px;\n`;\n\nexport const Card = ({ tier }) => {\n  return (\n    <Container style={{ borderColor: TIERS[tier] }}>\n      N/A\n    </Container>\n  )\n}\n\nconst OptionContainer = styled.div`\n  padding: 4px;\n  border: 3px solid #eee;\n  border-radius: 4px;\n  cursor: pointer;\n  hover {\n    opacity: .6;\n  }\n`;\n\nexport const CardOption = ({ title, description, onClick, selected }) => {\n  return (\n    <OptionContainer style={{ borderColor: '#eee', borderWidth: selected ? '5px' : '3px', fontWeight: selected ? 'bold' : 'normal' }} onClick={onClick}>\n      {title}<br />\n      {description}\n    </OptionContainer>\n  )\n}","import React, { useState, useContext } from 'react';\nimport styled from '@emotion/styled';\n\nimport { generateRandomUpgrades, getUpgradeDescription, UPGRADES } from '../data/targets';\nimport { PURCHASE_CARD_PRICE } from '../data/constants';\nimport { Modal } from \"./shared/modal\";\nimport { Button } from \"./shared/button\";\nimport { Centered } from \"./shared/util\";\nimport { Card, CardOption } from \"./shared/card\";\nimport { GameContext } from './app';\n\nconst Container = styled(Centered)`\n  display: flex;\n  flex-direction: column;\n  color: white;\n`;\n\nexport const Shop = () => {\n  const [purchaseCardModal, setPurchaseCardModal] = useState();\n  const { state, dispatch } = useContext(GameContext);\n\n  const purchaseCard = () => {\n    setPurchaseCardModal(generateRandomUpgrades({ count: 3 }));\n  };\n\n  return (\n    <Container>\n      <h1>Shop</h1>\n      Current Gold: {state.money}\n      <br />\n      Current Upgrades: \n      <div style={{ display: 'flex'}}>\n        {JSON.stringify(state.upgrades)}\n      </div>\n      <br /><br />\n      <Button onClick={purchaseCard} disabled={state.money < PURCHASE_CARD_PRICE}>Purchase Upgrade ({PURCHASE_CARD_PRICE} gold)</Button>\n      <br />\n      <Button onClick={() => dispatch({ type: 'startNextRound' })}>Next Level</Button>\n      <PurchaseCardModal options={purchaseCardModal} close={() => setPurchaseCardModal()} />\n    </Container>\n  );\n}\n\nconst PurchaseCardModal = ({ options, close }) => {\n  const { state, dispatch } = useContext(GameContext);\n  const [selected, setSelected] = useState(0);\n\n  const collect = () => {\n    dispatch({ type: 'upgrade', payload: { upgrades: [options[selected]] }})\n    close();\n  }\n\n  return (\n    options ? <Modal close={() => {}}>\n      <h1>Choose Your Card</h1>\n      {options.map((name, i) => {\n        const level = state.upgrades[name];\n        return (\n          <CardOption\n            key={i}\n            title={'Level ' + level}\n            description={getUpgradeDescription({ level, name })}\n            onClick={() => setSelected(i)}\n            selected={selected === i}\n          />\n        )\n      })}\n      <button onClick={collect}>Collect</button>\n    </Modal> : <></>\n  );\n}\n\n","const initialState = {\n  sensitivity: 0.4,\n  targetSize: 8,\n}\n\n// Key can be sensitivity, targetSize, etc.\nexport const save = (key, value) => localStorage.setItem(key, value);\nexport const fetch = (key) => localStorage.getItem(key) || initialState[key];\nexport const fetchInt = (key) => parseInt(localStorage.getItem(key) || initialState[key]);","import { useEffect, useContext } from 'react';\n\nimport { Modal } from \"./shared/modal\";\nimport { Button } from \"./shared/button\";\nimport { GameContext } from './app';\n\nimport { save } from '../utils/localStorage';\n\nexport const SettingsModal = ({ isOpen, close }) => {\n  const { state, dispatch } = useContext(GameContext);\n\n  useEffect(() => {\n    const { sensitivity, targetSize } = state;\n    if (sensitivity) {\n      save('sensitivity', sensitivity);\n    }\n    if (targetSize) {\n      save('targetSize', targetSize);\n    }\n  }, [state.sensitivity, state.targetSize]);\n\n  return (\n    isOpen ? <Modal close={close}>\n      <h1>Settings</h1>\n      <div>\n        Sensitivity: &nbsp;\n        <input \n          type=\"number\"\n          step=\"0.01\"\n          value={state.sensitivity} onChange={(event) =>\n            dispatch({ type: 'changeSettings', payload: { sensitivity: event.target.value } })\n          }\n        />\n      </div>\n      <div>\n        Target Size (in px): &nbsp;\n        <input \n          type=\"number\"\n          step=\"1\"\n          value={state.targetSize} onChange={(event) =>\n            dispatch({ type: 'changeSettings', payload: { targetSize: event.target.value } })\n          }\n        />\n      </div>\n      <br />\n      <Button onClick={close}>Save</Button>\n    </Modal> : <></>\n  );\n}","import { useReducer } from 'react';\n\nimport { fetch, fetchInt } from '../utils/localStorage';\nimport { STARTING_DECK, INITIAL_UPGRADES } from '../data/targets';\nimport { ROUND_TIME, INITIAL_GOAL_SCORE, COMPLETE_ROUND_ON_SCORE_HIT } from '../data/constants';\n\nconst initialState = {\n  status: 'INITIAL',\n  sensitivity: fetch('sensitivity'),\n  targetSize: fetchInt('targetSize'),\n};\n\nconst INITIAL_GAME_STATE = {\n  timer: ROUND_TIME,\n  currentScore: 0,\n  goalScore: INITIAL_GOAL_SCORE,\n  level: 1,\n  money: 0,\n  targets: STARTING_DECK,\n  upgrades: INITIAL_UPGRADES,\n}\n\nconst bumpLevel = (state) => ({\n  ...state,\n  money: state.money + state.currentScore,\n  currentScore: 0,\n  level: state.level + 1,\n  goalScore: Math.ceil(state.goalScore * 1.2),\n  status: 'SHOP',\n});\n\nconst reducer = (state, action) => {\n  switch(action.type) {\n    case 'changeSettings': {\n      return {\n        ...state,\n        sensitivity: action.payload.sensitivity || state.sensitivity,\n        targetSize: action.payload.targetSize || state.targetSize,\n      }\n    }\n    case 'returnToHomeScreen': {\n      return {\n        status: 'INITIAL',\n      }\n    }\n    case 'startGame':\n      return {\n        ...state,\n        status: 'RUNNING',\n        ...INITIAL_GAME_STATE,\n      }\n    // In-game actions\n    case 'hitTarget':\n      const newScore = state.currentScore + action.payload.inc;\n      if (newScore >= state.goalScore && COMPLETE_ROUND_ON_SCORE_HIT) {\n        // Complete round\n        return bumpLevel(state);\n      }\n      return {\n        ...state,\n        currentScore: newScore,\n      }\n    case 'endRound':\n      if (state.currentScore >= state.goalScore) {\n        return bumpLevel(state);\n      }\n      return {\n        ...state,\n        status: 'COMPLETED',\n      }\n    case 'upgrade':\n      if (!state.status === 'SHOP') {\n        throw new Error('Must be in shop to purchase')\n      }\n      const upgrades = Object.assign({}, state.upgrades);\n      action.payload.upgrades.forEach(upgrade => upgrades[upgrade]++);\n      return {\n        ...state,\n        upgrades,\n      }\n    case 'startNextRound':\n      if (!state.status === 'SHOP') {\n        throw new Error('Must be in shop to begin next round')\n      }\n      return {\n        ...state,\n        status: 'RUNNING',\n        timer: ROUND_TIME,\n      }\n    default:\n      throw new Error('Action not recognized - ' + action.type)\n  }\n}\n\nexport const useGameReducer = () => useReducer(reducer, initialState);","import React, { useState } from 'react';\nimport styled from '@emotion/styled';\n\nimport Game from './game';\nimport { Shop } from './shop';\nimport { SettingsModal } from './settings';\nimport { Button } from './shared/button';\nimport { Centered } from './shared/util';\n\nimport { useGameReducer } from '../hooks/game';\n\nconst Container = styled.div`\n  color: white;\n`;\n\nconst StartScreen = styled(Centered)`\n  font-weight: 600;\n  text-transform: uppercase;\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  margin-right: -50%;\n  transform: translate(-50%, -50%);\n  display: flex;\n  flex-direction: column;\n  button {\n    margin-bottom: 8px;\n  }\n`;\n\nexport const GameContext = React.createContext();\n\nconst App = () => {\n  const [state, dispatch] = useGameReducer();\n  const [settings, setSettings] = useState(false);\n\n  const startGame = () => {\n    dispatch({ type: 'startGame' });\n  }\n  const returnHome = () => {\n    dispatch({ type: 'returnToHomeScreen' });\n  }\n\n  return (\n    <GameContext.Provider value={{ state, dispatch }}>\n      <Container>\n        {state.status === 'INITIAL' &&\n          <StartScreen>\n            <Button onClick={startGame}>Start Game</Button>\n            <Button onClick={() => setSettings(true)}>Settings</Button>\n            <SettingsModal isOpen={settings} close={() => setSettings(false)} />\n          </StartScreen>\n        }\n        {state.status === 'RUNNING' && <Game />}\n        {state.status === 'SHOP' && <Shop />}\n        {state.status === 'COMPLETED' && \n          <StartScreen>\n            <h1>Game Over</h1>\n            <p>Level Reached: {state.level}</p>\n            <p>Score Reached: {state.currentScore}</p>\n            <p>Goal Score: {state.goalScore}</p>\n            <Button onClick={startGame}>Play Again</Button>\n            <Button onClick={returnHome}>Return Home</Button>\n          </StartScreen>}\n      </Container>\n    </GameContext.Provider>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/app';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}